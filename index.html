<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Mathswell — Interactive Maths Apps</title>
<meta name="description" content="All interactive maths apps by Amir Asghari — dynamic gallery powered by GitHub." />
<link rel="icon" href="data:," />
<style>
  :root { --bg:#f6f8fb; --fg:#0f172a; --muted:#475569; --brand:#1e3a8a; --accent:#3b82f6; --card:#ffffff; }
  * { box-sizing: border-box; }
  body { margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; background:var(--bg); color:var(--fg); line-height:1.5; }
  header { background:linear-gradient(160deg, var(--brand), var(--accent)); color:#fff; padding:3.2rem 1rem; text-align:center; }
  header h1 { margin:0; font-size: clamp(2.2rem, 3.5vw, 3.2rem); letter-spacing:.2px; }
  header p { margin:1rem auto 0; max-width: 70ch; opacity:.95; font-size: clamp(1rem, 1.8vw, 1.15rem); }
  nav { background:#eef2f7; padding:.8rem 1rem; display:flex; gap:1rem; justify-content:center; position:sticky; top:0; z-index:10; border-bottom:1px solid #e5e7eb; }
  nav a { color:var(--brand); text-decoration:none; font-weight:700; }
  main { max-width:1200px; margin:2rem auto; padding:0 1rem; }
  h2 { font-size:1.8rem; margin:0 0 1rem; }
  .grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap:1.1rem; }
  .card { background:var(--card); border-radius:16px; box-shadow:0 8px 22px rgba(0,0,0,.06); padding:1rem; display:flex; flex-direction:column; gap:.5rem; }
  .card h3 { margin:.25rem 0; font-size:1.15rem; }
  .card p { margin:0; color:var(--muted); }
  .card a { margin-top:.6rem; align-self:flex-start; background:var(--brand); color:#fff; padding:.5rem .9rem; border-radius:9px; text-decoration:none; font-weight:700; }
  .section { margin:3rem 0 0; }
  .note { font-size:.95rem; color:var(--muted); margin:.5rem 0 1rem; }
  footer { background:var(--brand); color:#fff; text-align:center; padding:1.25rem; margin-top:3rem; }
  .chips { display:flex; gap:.5rem; flex-wrap:wrap; }
  .chip { background:#e5e7eb; padding:.35rem .7rem; border-radius:999px; font-weight:700; text-decoration:none; color:#111827; }
</style>
</head>
<body>
<header>
  <h1>Mathswell</h1>
  <p>Interactive maths learning apps by Amir Asghari — fast, visual, and classroom‑ready. This gallery updates itself automatically from the repository.</p>
</header>

<nav aria-label="Primary">
  <a href="#featured">Featured</a>
  <a href="#all">All Apps</a>
  <a href="#about">About</a>
  <a href="#contact">Contact</a>
</nav>

<main>
  <section id="featured" class="section">
    <h2>Featured</h2>
    <p class="note">Edit the <code>pinnedSlugs</code> list (below) to control which apps are featured.</p>
    <div id="featuredGrid" class="grid"></div>
  </section>

  <section id="all" class="section">
    <h2>All Apps</h2>
    <p class="note">Generated from top-level folders (that contain <code>index.html</code>) and top-level <code>.html</code> files in this repository. Case-sensitive paths are used exactly as they are in your repo.</p>
    <div id="appsGrid" class="grid"></div>
  </section>

  <section id="about" class="section">
    <h2>About Mathswell</h2>
    <p>Mathswell is a growing set of interactive tools designed to make learning mathematics engaging and intuitive. Whether you're a student exploring new concepts or a teacher preparing a lesson, these apps help you learn by doing.</p>
  </section>

  <section id="contact" class="section">
    <h2>Contact</h2>
    <div class="chips">
      <a class="chip" href="mailto:info@mathswell.com">Email</a>
      <a class="chip" href="https://github.com/asghariamir" target="_blank" rel="noopener">GitHub</a>
    </div>
  </section>
</main>

<footer>
  <p>&copy; 2025 Mathswell. All rights reserved.</p>
</footer>

<script>
// Dynamic gallery using the GitHub API
const owner = "asghariamir";
const repo  = "asghariamir.github.io";
const api   = `https://api.github.com/repos/${owner}/${repo}/contents`;

// Use exact slugs (case-sensitive). Leave empty [] to auto-pick first 6.
const pinnedSlugs = [];

function slugToTitle(slug) {
  return slug.replace(/\.html$/i,'').replace(/[-_]+/g,' ').replace(/\b\w/g, c => c.toUpperCase());
}

function createCard({title, href}) {
  const div = document.createElement("div");
  div.className = "card";
  div.innerHTML = `<h3>${title}</h3><a href="${href}">Try now</a>`;
  return div;
}

async function build() {
  const res = await fetch(api);
  if (!res.ok) {
    document.getElementById("appsGrid").innerHTML = '<p class="note">Could not load the app list automatically. You can still access the full gallery <a href="/gallery/">here</a>.</p>';
    return;
  }
  const items = await res.json();
  const ignoreFolders = new Set(["gallery"]);
  const ignoreFiles = new Set(["index.html", "404.html", ".nojekyll", "README.md", "README.txt"]);

  const apps = [];
  for (const item of items) {
    if (item.type === "dir") {
      if (ignoreFolders.has(item.name)) continue;
      const subRes = await fetch(item.url);
      if (!subRes.ok) continue;
      const subItems = await subRes.json();
      const hasIndex = subItems.some(x => x.name.toLowerCase() === "index.html");
      if (hasIndex) apps.push({ slug: item.name, href: `/${item.name}/` });
    } else if (item.type === "file") {
      if (ignoreFiles.has(item.name)) continue;
      if (/\.html$/i.test(item.name)) apps.push({ slug: item.name, href: `/${item.name}` });
    }
  }

  // Sort and render
  apps.sort((a,b) => slugToTitle(a.slug).localeCompare(slugToTitle(b.slug)));
  const featuredGrid = document.getElementById("featuredGrid");
  const appsGrid = document.getElementById("appsGrid");

  let featured = [];
  if (pinnedSlugs.length) {
    for (const pin of pinnedSlugs) {
      const m = apps.find(a => a.slug === pin || a.slug.replace(/\.html$/i,'') === pin);
      if (m) featured.push(m);
    }
  } else {
    featured = apps.slice(0,6);
  }

  featured.forEach(a => featuredGrid.appendChild(createCard({title: slugToTitle(a.slug), href: a.href})));
  apps.forEach(a => appsGrid.appendChild(createCard({title: slugToTitle(a.slug), href: a.href})));
}

build();
</script>
</body>
</html>
